[
    "# Rule 1: For action 'place', if the player does not have the required materials in the inventory to place the specified item, the action will fail; Checking Method: Verify if the player's inventory contains the required materials for the item specified in the 'place' action's 'block_name' argument. \ndef Rule_1_place(state, action, knowledge_graph):\n    feedback = \"\"\n    success = True\n    suggestion = \"\"\n\n    # Check if the action is 'place'\n    if action[\"action_name\"] == \"place\":\n        block_name = action[\"args\"][\"block_name\"]\n        \n        # Check if the block_name exists in the knowledge graph\n        if block_name in knowledge_graph:\n            required_materials = knowledge_graph[block_name].get(\"crafting_material\", {})\n            \n            # Verify if the player's inventory contains the required materials\n            for material, quantity in required_materials.items():\n                if state[\"inventory\"].get(material, 0) < quantity:\n                    success = False\n                    feedback = f\"Failed to place {block_name}.\"\n                    suggestion = (f\"To place a {block_name}, you need {quantity} {material}. \"\n                                  f\"it is possible to get {material} from {knowledge_graph[material]['collecting_resource']}.\")\n                    break\n            \n            if success:\n                feedback = f\"Successfully placed {block_name}.\"\n        else:\n            feedback = f\"Block {block_name} is not recognized in the knowledge graph.\"\n            success = False\n            suggestion = \"Please check the block name and try again.\"\n    else:\n        feedback = \"Action executed successfully.\"\n    \n    return feedback, success, suggestion\n",
    "# Rule 2: For action mine(block_name='tree', amount), if the player's inventory does not contain an 'iron_pickaxe', the action will fail; Checking Method: Verify if the player's inventory contains an axe. If not, the action will fail. \ndef Rule_2_mine(state, action, knowledge_graph):\n    feedback = \"\"\n    success = True\n    suggestion = \"\"\n\n    # Check if the action is 'mine' and the block_name is 'tree'\n    if action[\"action_name\"] == \"mine\" and action[\"args\"][\"block_name\"] == \"tree\":\n        # Check if the player's inventory contains an 'iron_pickaxe'\n        if \"iron_pickaxe\" not in state[\"inventory\"]:\n            success = False\n            feedback = \"Action failed: You need an iron_pickaxe to mine a tree.\"\n            suggestion = \"Instead of obtaining wood from trees, players can acquire it from stone. \"\n\n    if success:\n        feedback = \"Action executed successfully.\"\n\n    return feedback, success, suggestion\n",
    "# Rule 3: For action 'mine', if the player attempts to mine 'coal' and does not have a 'wood_pickaxe' or better in their inventory, the action will fail; Checking Method: Check if 'wood_pickaxe' or a better tool is present in the inventory when attempting to mine 'coal'. \ndef Rule_3_mine(state, action, knowledge_graph):\n    feedback = \"\"\n    success = True\n    suggestion = \"\"\n\n    # Check if the action is 'mine' and the block_name is 'coal'\n    if action[\"action_name\"] == \"mine\" and action[\"args\"][\"block_name\"] == \"coal\":\n        # Check if 'wood_pickaxe' or a better tool is in the inventory\n        inventory = state[\"inventory\"]\n        required_tools = knowledge_graph[\"coal\"][\"equipment\"]\n        has_required_tool = any(tool in inventory for tool in required_tools)\n\n        if not has_required_tool:\n            success = False\n            feedback = \"Action failed: You need a 'wood_pickaxe' or better to mine 'coal'.\"\n            suggestion = (\"To obtain coal from mining, it is necessary to have a 'wood_pickaxe' \"\n                          \"or a better tool in your inventory. Consider crafting a 'wood_pickaxe' using wood on \"\n                          \"table and furnace.\")\n        else:\n            feedback = \"Action succeeded: You mined 'coal' successfully.\"\n\n    else:\n        feedback = \"Action succeeded: The action was executed successfully.\"\n\n    return feedback, success, suggestion\n",
    "# Rule 5: For the action mine, if the player attempts to mine a resource and does not have the required tool or a better one in their inventory, the action will fail. Checking Method: Check if the appropriate tool or a better one is present in the inventory when attempting to mine the specific resource. The required tool depends on the resource being mined. \ndef Rule_5_mine(state, action, knowledge_graph):\n    feedback = \"\"\n    success = True\n    suggestion = \"\"\n\n    if action[\"action_name\"] == \"mine\":\n        block_name = action[\"args\"][\"block_name\"]\n        if block_name in knowledge_graph:\n            required_tools = knowledge_graph[block_name].get(\"equipment\", [])\n            has_required_tool = any(tool in state[\"inventory\"] for tool in required_tools)\n            \n            if not has_required_tool:\n                success = False\n                feedback = f\"Failed to mine {block_name}.\"\n                suggestion = f\"To mine {block_name}, you need one of the following tools: {', '.join(required_tools)}. Consider crafting or acquiring one of these tools.\"\n            else:\n                feedback = f\"Successfully mined {block_name}.\"\n        else:\n            feedback = f\"Successfully mined {block_name}.\"\n    else:\n        feedback = \"Action executed successfully.\"\n\n    return feedback, success, suggestion\n",
    "# Rule 1: For action attack(creature, amount), if the player does not have an appropriate weapon or tool in the inventory, the action will fail; Checking Method: Check the player's inventory for weapons or tools suitable for attacking the specified creature. \ndef Rule_1_attack(state, action, knowledge_graph):\n    # Extract action details\n    action_name = action.get(\"action_name\")\n    args = action.get(\"args\", {})\n    \n    # Check if the action is 'attack'\n    if action_name == \"attack\":\n        creature = args.get(\"creature\")\n        amount = args.get(\"amount\")\n        \n        # Check if the player has an appropriate weapon or tool in the inventory\n        inventory = state.get(\"inventory\", {})\n        has_weapon = False\n        \n        # Define suitable weapons or tools for attacking creatures\n        suitable_weapons = [\"wood_sword\", \"stone_sword\", \"iron_sword\", \"wood_pickaxe\", \"stone_pickaxe\", \"iron_pickaxe\"]\n        \n        # Check if any suitable weapon is in the inventory\n        for weapon in suitable_weapons:\n            if weapon in inventory and inventory[weapon] > 0:\n                has_weapon = True\n                break\n        \n        # Determine feedback, success, and suggestion\n        if has_weapon:\n            feedback = f\"Successfully attacked the {creature} with a suitable weapon.\"\n            success = True\n            suggestion = \"\"\n        else:\n            feedback = f\"Failed to attack the {creature}. No suitable weapon in inventory.\"\n            success = False\n            suggestion = (\n                f\"To attack a {creature}, you need a suitable weapon like a wood_sword or iron_sword. \"\n                \"Consider crafting one using the materials available. \"\n                \"For example, crafting a wood_sword requires 1 wood and a crafting table.\"\n            )\n    else:\n        # If the action is not 'attack', consider it successful by default\n        feedback = \"Action executed successfully.\"\n        success = True\n        suggestion = \"\"\n    \n    return feedback, success, suggestion\n",
    "# Rule 1: For action make(tool_name), if the inventory does not contain enough of the necessary materials to craft the tool, the action will fail; Checking Method: Verify the player's inventory to ensure it contains all required materials in sufficient quantities for crafting the specified tool. \ndef Rule_1_make(state, action, knowledge_graph):\n    feedback = \"\"\n    success = True\n    suggestion = \"\"\n\n    if action[\"action_name\"] == \"make\":\n        tool_name = action[\"args\"][\"tool_name\"]\n        if tool_name in knowledge_graph:\n            tool_info = knowledge_graph[tool_name]\n            required_materials = tool_info.get(\"crafting_material\", {})\n            inventory = state[\"inventory\"]\n\n            # Check if all required materials are in the inventory with sufficient quantity\n            for material, required_quantity in required_materials.items():\n                if inventory.get(material, 0) < required_quantity:\n                    success = False\n                    feedback = f\"Failed to make {tool_name}.\"\n                    suggestion = f\"To craft a {tool_name}, you need {required_quantity} {material}. \"\n                    suggestion += f\"Currently, you have {inventory.get(material, 0)} {material}. \"\n                    suggestion += f\"Consider collecting more {material}. \"\n                    if material in knowledge_graph:\n                        collecting_info = knowledge_graph[material].get(\"collecting_resource\", [])\n                        if collecting_info:\n                            suggestion += f\"{material} can be collected from {', '.join(collecting_info)}.\"\n                    break\n\n            if success:\n                feedback = f\"Successfully made {tool_name}.\"\n        else:\n            feedback = f\"Tool {tool_name} is not recognized in the knowledge graph.\"\n            success = False\n            suggestion = \"Please check the tool name and try again.\"\n    else:\n        feedback = \"Action executed successfully.\"\n        success = True\n\n    return feedback, success, suggestion\n",
    "# Rule 3: For action make(tool_name), if the required materials for the tool are not present in the inventory, the action will fail; Checking Method: Verify that the inventory contains all necessary materials (e.g., 'wood' for a 'wood pickaxe') in sufficient quantities before attempting to make the tool. \ndef Rule_3_make(state, action, knowledge_graph):\n    feedback = \"\"\n    success = True\n    suggestion = \"\"\n\n    if action[\"action_name\"] == \"make\":\n        tool_name = action[\"args\"][\"tool_name\"]\n        if tool_name in knowledge_graph:\n            tool_info = knowledge_graph[tool_name]\n            required_materials = tool_info.get(\"crafting_material\", {})\n            inventory = state[\"inventory\"]\n\n            # Check if all required materials are present in the inventory\n            for material, quantity in required_materials.items():\n                if inventory.get(material, 0) < quantity:\n                    success = False\n                    feedback = f\"Failed to make {tool_name}.\"\n                    suggestion = f\"To make a {tool_name}, you need {quantity} {material}. \"\n                    suggestion += f\"Currently, you have {inventory.get(material, 0)} {material}. \"\n                    suggestion += f\"Consider collecting more {material}. \"\n                    if material in knowledge_graph:\n                        collecting_info = knowledge_graph[material].get(\"collecting_resource\", [])\n                        if collecting_info:\n                            suggestion += f\"{material} can be collected from {', '.join(collecting_info)}.\"\n                    break\n\n            if success:\n                feedback = f\"Successfully made {tool_name}.\"\n        else:\n            feedback = f\"Tool {tool_name} is not recognized in the knowledge graph.\"\n            success = False\n            suggestion = \"Please check the tool name or update the knowledge graph.\"\n\n    else:\n        feedback = \"Action executed successfully.\"\n        success = True\n\n    return feedback, success, suggestion\n",
    "# Rule 6: For action 'make', if 'table' is not in 'near_objects', the action will fail; Checking Method: Check if 'table' is in the 'near_objects' list of the initial state. \ndef Rule_6_make(state, action, knowledge_graph):\n    feedback = \"\"\n    success = True\n    suggestion = \"\"\n\n    # Check if the action is 'make'\n    if action[\"action_name\"] == \"make\":\n        tool_name = action[\"args\"][\"tool_name\"]\n        # Check if 'table' is required and not in 'near_objects'\n        if \"table\" in knowledge_graph[tool_name][\"crafting_platform\"] and \"table\" not in state[\"near_objects\"]:\n            feedback = f\"Failed to make {tool_name} because a crafting table is not nearby.\"\n            success = False\n            suggestion = f\"To craft a {tool_name}, you need a crafting table nearby. Consider placing a table first. \" \\\n                         f\"Crafting a {tool_name} requires {knowledge_graph[tool_name]['crafting_material']}.\"\n        else:\n            feedback = f\"Successfully made {tool_name}.\"\n    else:\n        feedback = \"Action executed successfully.\"\n\n    return feedback, success, suggestion\n",
    "# Rule 7: For action 'make', if the required crafting platform is not in 'near_objects', the action will fail; Checking Method: Check if the required crafting platform is in the 'near_objects' list of the initial state. \ndef Rule_7_make(state, action, knowledge_graph):\n    feedback = \"\"\n    success = True\n    suggestion = \"\"\n\n    if action[\"action_name\"] == \"make\":\n        tool_name = action[\"args\"][\"tool_name\"]\n        if tool_name in knowledge_graph:\n            required_platforms = knowledge_graph[tool_name].get(\"crafting_platform\", [])\n            if not set(required_platforms).issubset(set(state.get(\"near_objects\", []))):\n                success = False\n                feedback = f\"Failed to make {tool_name}.\"\n                suggestion = f\"To make a {tool_name}, you need to be near the following platforms: {', '.join(required_platforms)}.\"\n            else:\n                feedback = f\"Successfully made {tool_name}.\"\n        else:\n            feedback = f\"Tool {tool_name} is not recognized in the knowledge graph.\"\n    else:\n        feedback = \"Action executed successfully.\"\n\n    return feedback, success, suggestion\n"
]